<script>
    // 1. Setup Map
    var map = L.map('map', { crs: L.CRS.Simple, minZoom: -1 });
    var bounds = [[0,0], [1000, 2000]]; // Adjusted for your wide layout
    var image = L.imageOverlay('Cernak lab map.svg', bounds).addTo(map);
    map.fitBounds(bounds);

    // 2. The "Isco" Marker with Dynamic Status
    // Based on your image, let's try these coordinates for Room 3606
    var isco3606 = L.marker([400, 300]).addTo(map);

    // Define the status color (we will change this to 'red' later)
    var iscoStatus = "green"; 

    isco3606.bindPopup(`
        <div style="text-align: center; font-family: sans-serif;">
            <h3>Isco: Room 3606</h3>
            <p>Status: <span style="color: ${iscoStatus};">‚óè ${iscoStatus.toUpperCase()}</span></p>
            <hr>
            <a href="../instruments/Isco.md">üìñ View Manual</a><br><br>
            <button onclick="changeStatus()">Report Issue (Turn Red)</button>
        </div>
    `);

    // 3. The Coordinate Finder (Crucial for fixing your pin placement)
    map.on('click', function(e) {
        L.popup().setLatLng(e.latlng)
            .setContent("Copy these numbers: [" + e.latlng.lat.toFixed(0) + ", " + e.latlng.lng.toFixed(0) + "]")
            .openOn(map);
    });
</script>
